nohup: ignoring input
[2025-11-27 17:42:55 +0000] [505474] [INFO] Starting gunicorn 23.0.0
[2025-11-27 17:42:55 +0000] [505474] [ERROR] Connection in use: ('127.0.0.1', 8000)
[2025-11-27 17:42:55 +0000] [505474] [ERROR] connection to ('127.0.0.1', 8000) failed: [Errno 98] Address already in use
[2025-11-27 17:42:56 +0000] [505474] [ERROR] Connection in use: ('127.0.0.1', 8000)
[2025-11-27 17:42:56 +0000] [505474] [ERROR] connection to ('127.0.0.1', 8000) failed: [Errno 98] Address already in use
[2025-11-27 17:42:57 +0000] [505474] [ERROR] Connection in use: ('127.0.0.1', 8000)
[2025-11-27 17:42:57 +0000] [505474] [ERROR] connection to ('127.0.0.1', 8000) failed: [Errno 98] Address already in use
[2025-11-27 17:42:58 +0000] [505474] [ERROR] Connection in use: ('127.0.0.1', 8000)
[2025-11-27 17:42:58 +0000] [505474] [ERROR] connection to ('127.0.0.1', 8000) failed: [Errno 98] Address already in use
[2025-11-27 17:42:59 +0000] [505474] [ERROR] Connection in use: ('127.0.0.1', 8000)
[2025-11-27 17:42:59 +0000] [505474] [ERROR] connection to ('127.0.0.1', 8000) failed: [Errno 98] Address already in use
[2025-11-27 17:43:00 +0000] [505474] [ERROR] Can't connect to ('127.0.0.1', 8000)
[INFO] Сохранено за 2025-11-01
[INFO] Сохранено за 2025-11-02
[INFO] Сохранено за 2025-11-03
[INFO] Сохранено за 2025-11-04
[INFO] Сохранено за 2025-11-05
[INFO] Сохранено за 2025-11-06
[INFO] Сохранено за 2025-11-07
[INFO] Сохранено за 2025-11-08
[INFO] Сохранено за 2025-11-09
[INFO] Сохранено за 2025-11-10
[INFO] Сохранено за 2025-11-11
[INFO] Сохранено за 2025-11-12
[INFO] Сохранено за 2025-11-13
[INFO] Сохранено за 2025-11-14
[INFO] Сохранено за 2025-11-15
[INFO] Сохранено за 2025-11-16
[INFO] Сохранено за 2025-11-17
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 4980, in week_notes
    db.session.commit()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 206, '7666621', 'Sokolov Mikhail', 'mikhail_pub@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'Remote', None, None, 16, 0, 42, 2663, 2705, 2705, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', 8, None, None, 'Замечаний нет', '2025-12-01 07:04:54.984745')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
[INFO] Сохранено за 2025-11-25
[INFO] Сохранено за 2025-11-26
[INFO] Сохранено за 2025-11-27
[INFO] Сохранено за 2025-11-03
[INFO] Сохранено за 2025-11-04
[INFO] Сохранено за 2025-11-05
[INFO] Сохранено за 2025-11-06
[INFO] Сохранено за 2025-11-07
[INFO] Сохранено за 2025-11-08
[INFO] Сохранено за 2025-11-09
[INFO] Сохранено за 2025-11-29
[WARN] Пропущено 5 користувачів з YaWare (немає в нашій базі)
[INFO] Сохранено за 2025-11-30
[WARN] Пропущено 6 користувачів з YaWare (немає в нашій базі)
[INFO] Сохранено за 2025-11-10
[INFO] Сохранено за 2025-11-11
[INFO] Сохранено за 2025-11-12
[INFO] Сохранено за 2025-11-13
[INFO] Сохранено за 2025-11-14
[INFO] Сохранено за 2025-11-15
[INFO] Сохранено за 2025-11-16
[INFO] Сохранено за 2025-11-01
[INFO] Сохранено за 2025-11-02
[INFO] Сохранено за 2025-11-17
[INFO] Сохранено за 2025-11-18
[INFO] Сохранено за 2025-11-19
[INFO] Сохранено за 2025-11-20
[INFO] Сохранено за 2025-11-21
[INFO] Сохранено за 2025-11-22
[INFO] Сохранено за 2025-11-23
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 4980, in week_notes
    db.session.commit()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, 'test', '2025-12-01 17:32:03.921984')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 4980, in week_notes
    db.session.commit()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, '', '2025-12-01 17:32:34.594841')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 4980, in week_notes
    db.session.commit()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, 'test', '2025-12-01 17:39:43.203837')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 4980, in week_notes
    db.session.commit()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 142, '7931903', 'Klimchenya Valery', 'v.klimchenya@evadav.com', 'week_total', 'Agency', 'Media Buying Direction', '', 'Remote', None, None, 122, 164, 42, 2464, 2506, None, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, 'test', '2025-12-01 17:51:03.072384')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 4980, in week_notes
    db.session.commit()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, 'test', '2025-12-01 17:54:47.123737')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Помилка запиту до PeopleForce API: 502 Server Error: Bad Gateway for url: https://evrius.peopleforce.io/api/public/v3/leave_requests?page=25&per_page=100
Failed to collect lateness for 2025-11-11: 502 Server Error: Bad Gateway for url: https://evrius.peopleforce.io/api/public/v3/leave_requests?page=25&per_page=100
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/lateness_service.py", line 219, in collect_lateness_for_date
    lateness_data = _fetch_lateness_data_from_yaware(target_date, monitor)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/dashboard_app/lateness_service.py", line 67, in _fetch_lateness_data_from_yaware
    leaves_raw = monitor._get_leaves_for_date(target_date)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/tracker_alert/services/attendance_monitor.py", line 150, in _get_leaves_for_date
    all_leaves = self.pf_client.get_leave_requests(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/tracker_alert/client/peopleforce_api.py", line 157, in get_leave_requests
    data = self._get("/leave_requests", params={'page': page, 'per_page': 100})
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/tracker_alert/client/peopleforce_api.py", line 42, in _get
    response.raise_for_status()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 502 Server Error: Bad Gateway for url: https://evrius.peopleforce.io/api/public/v3/leave_requests?page=25&per_page=100
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 4980, in week_notes
    db.session.commit()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, 'test', '2025-12-01 17:56:40.459771')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 4989, in week_notes
    db.session.commit()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, 'test', '2025-12-01 18:00:38.777316')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 4989, in week_notes
    db.session.commit()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, '', '2025-12-01 18:00:54.524888')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Failed to collect lateness for 2025-11-24: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: DELETE FROM lateness_records WHERE lateness_records.record_date = ?]
[parameters: ('2025-11-24',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/lateness_service.py", line 223, in collect_lateness_for_date
    deleted = LatenessRecord.query.filter_by(record_date=target_date).delete()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 3210, in delete
    self.session.execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/bulk_persistence.py", line 2033, in orm_execute_statement
    return super().orm_execute_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: DELETE FROM lateness_records WHERE lateness_records.record_date = ?]
[parameters: ('2025-11-24',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 4989, in week_notes
    db.session.commit()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, 'test', '2025-12-01 18:03:19.338664')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Failed to collect lateness for 2025-11-25: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: DELETE FROM lateness_records WHERE lateness_records.record_date = ?]
[parameters: ('2025-11-25',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/lateness_service.py", line 223, in collect_lateness_for_date
    deleted = LatenessRecord.query.filter_by(record_date=target_date).delete()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 3210, in delete
    self.session.execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/bulk_persistence.py", line 2033, in orm_execute_statement
    return super().orm_execute_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: DELETE FROM lateness_records WHERE lateness_records.record_date = ?]
[parameters: ('2025-11-25',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Failed to collect lateness for 2025-11-26: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: DELETE FROM lateness_records WHERE lateness_records.record_date = ?]
[parameters: ('2025-11-26',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/lateness_service.py", line 223, in collect_lateness_for_date
    deleted = LatenessRecord.query.filter_by(record_date=target_date).delete()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 3210, in delete
    self.session.execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/bulk_persistence.py", line 2033, in orm_execute_statement
    return super().orm_execute_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: DELETE FROM lateness_records WHERE lateness_records.record_date = ?]
[parameters: ('2025-11-26',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 4989, in week_notes
    db.session.commit()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, '', '2025-12-01 18:03:55.238874')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Failed to collect lateness for 2025-11-27: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: DELETE FROM lateness_records WHERE lateness_records.record_date = ?]
[parameters: ('2025-11-27',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/lateness_service.py", line 223, in collect_lateness_for_date
    deleted = LatenessRecord.query.filter_by(record_date=target_date).delete()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 3210, in delete
    self.session.execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/bulk_persistence.py", line 2033, in orm_execute_statement
    return super().orm_execute_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: DELETE FROM lateness_records WHERE lateness_records.record_date = ?]
[parameters: ('2025-11-27',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Failed to collect lateness for 2025-11-28: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: DELETE FROM lateness_records WHERE lateness_records.record_date = ?]
[parameters: ('2025-11-28',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/lateness_service.py", line 223, in collect_lateness_for_date
    deleted = LatenessRecord.query.filter_by(record_date=target_date).delete()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 3210, in delete
    self.session.execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/bulk_persistence.py", line 2033, in orm_execute_statement
    return super().orm_execute_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: DELETE FROM lateness_records WHERE lateness_records.record_date = ?]
[parameters: ('2025-11-28',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 4989, in week_notes
    db.session.commit()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, 'еуіе', '2025-12-01 18:12:47.579605')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 4989, in week_notes
    db.session.commit()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, '', '2025-12-01 18:13:02.770728')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 4989, in week_notes
    db.session.commit()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, 'test', '2025-12-01 18:13:39.909543')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 4976, in week_notes
    db.session.commit()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, 'test', '2025-12-01 18:17:10.941188')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 4976, in week_notes
    'deleted_count': deleted_count
        ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, 'test', '2025-12-01 18:26:12.991738')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 4976, in week_notes
    'deleted_count': deleted_count
        ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, '', '2025-12-01 18:26:29.634072')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 5000, in week_notes
    db.session.commit()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, 'test', '2025-12-01 18:39:21.118908')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 5000, in week_notes
    ).first()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, 'test', '2025-12-01 19:22:54.836132')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 5000, in week_notes
    ).first()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 288, '7937929', 'Melnitsyn Stanislav', 's.melnitsyn@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', 'CPA Team', 'Remote', None, None, 475, 391, 1017, 1052, 2069, 2069, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', 8, None, None, 'Замечаний нет', '2025-12-02 03:55:48.607945')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 5000, in week_notes
    ).first()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, '', '2025-12-02 07:11:19.037867')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 5000, in week_notes
    ).first()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, 'test', '2025-12-02 07:23:25.708458')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 5000, in week_notes
    ).first()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, '', '2025-12-02 07:23:55.313717')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 5000, in week_notes
    ).first()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, 'test', '2025-12-02 07:27:33.810644')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 5000, in week_notes
    ).first()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, 'test', '2025-12-02 07:28:09.075889')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Error saving week notes
Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/deploy/www/YaWare_Bot/dashboard_app/api.py", line 5000, in week_notes
    ).first()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/deploy/www/YaWare_Bot/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: attendance_records.record_date, attendance_records.user_id
[SQL: INSERT INTO attendance_records (record_date, internal_user_id, user_id, user_name, user_email, record_type, project, department, team, location, scheduled_start, actual_start, minutes_late, non_productive_minutes, not_categorized_minutes, productive_minutes, total_minutes, corrected_total_minutes, manual_scheduled_start, manual_actual_start, manual_minutes_late, manual_non_productive_minutes, manual_not_categorized_minutes, manual_productive_minutes, manual_total_minutes, manual_corrected_total_minutes, manual_status, manual_notes, manual_leave_reason, status, control_manager, leave_reason, half_day_amount, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('2025-11-29', 100, '7684922', 'Abdurazzakov Abdulaziz', 'abdulaziz@evadav.com', 'week_total', 'Adnetwork', 'Sales Direction', '', 'UA', None, None, 6, 173, 0, 2295, 2295, 938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'present', None, None, None, '', '2025-12-02 07:28:25.077082')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
